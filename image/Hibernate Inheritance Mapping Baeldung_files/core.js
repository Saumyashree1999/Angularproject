(function(){let e,t=this,r=t.document;const n=r.currentScript.src;let i=n.substr(0,n.lastIndexOf("/")+1),o=r.body||r.head,a=o.querySelector("iframe#sleeknote");a?e=a.contentWindow:(o.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),e=o.lastElementChild.contentWindow,e.promises=[]);let s="";if(!i.includes("local.sleeknote.com")){let e=n.split("/").pop().split(".")[0];s=(e.split("-")[1]||"production")+"/"}let l=new e.URL(t.location),c=new e.URLSearchParams(l.search);if(c.has("snhide"))return;let u=n.split("#")[1]||"SleekNote",d="https://local.sleeknote.com",m=(c.has("snlocal")||e.local)&&!n.includes(d),p=c.get("snbranch");if(m||p){let n=r.createElement("script");return n.charset="utf-8",m?(c.delete("snlocal"),n.src=d,e.local=!0):(c.delete("snbranch"),n.src="https://core-branches.sleeknote.com/branch-"+p),t.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+c.toString()),n.src+="/frontend2/core.js#"+u,void r.head.appendChild(n)}if(!t.sndefine){let n=Object.create(null),o=Object.create(null);function f(t){let a=e.Promise.resolve();return n[t]||(a=new e.Promise(((e,n)=>{if(o[t])o[t].resolve.push(e),o[t].reject.push(n);else{o[t]={resolve:[e],reject:[n]};let a=r.createElement("script");a.src=i+s+(~t.indexOf(".js")?t:t+".js"),a.name=t,a.async=!0,a.charset="utf-8",r.head.appendChild(a),a.onload=function(){o[t].resolve.forEach((e=>{e()}))},a.onerror=function(e){throw o[t].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),a.then((()=>n[t]))}Object.defineProperty(t,"sndefine",{value:function(...i){var o="string"==typeof i[0]?i.shift():r.currentScript.name,a=Array.isArray(i[0])?i.shift():[],s=i[0];n[o]||(n[o]=e.Promise.resolve().then((()=>e.Promise.all(a.map(f)).then((e=>s.apply(t,e))))))}}),Object.defineProperty(t,"arequire",{value:function(t){return new e.Promise((r=>{!function(t,r){e.Promise.all(t.map(f)).then((e=>{r&&r.apply(this,e)}))}([t],(function(e){return r(e)}))}))}}),n.global=e.Promise.resolve().then((()=>{const t=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout"];return new e.Proxy({},{get(r,n){let i=e[n];return t.includes(n)&&(i=i.bind(e)),i}})})),n["core-sleeknote"]=e.Promise.resolve().then((()=>{t.dev||(t.dev=Object.create(null));let r=Object.fromEntries(c.entries());var n={isSubscribedFromQuery:"true"==r.SNSubscribed||"drip"==r.utm_source&&"email"==r.utm_medium,debug:r.sndebug||r.sleeknote_debug&&"1"||"",reset:r.snreset,editor:r.sneditor,preview:r.snpreview,timestamp:"?"+(Number("{{sleekNotetimestamp}}")||""),getBase:()=>i+s,local:i.includes("local."),custom(e,t){var r=n.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.CustomInitSettings,expose:(e,r)=>(t.dev[r]=e,e),hooks:{},eventName:"eve"+ +new Date,needBadge:!1,getDomainLimits:function(){return n.DomainLimits},namespaces:new e.Set,CustomInitSettings:{},DomainLimits:{},SleekNotes:[],getCampaignName(t){let r=t.campaignName;try{r=e.decodeURI(e.decodeURI(r))}catch(e){}return r}};return n.preview&&(n.mergeId=void 0===r.snmergeid?0:r.snmergeid),n}))}let h,g=t.arequire("package-core-boot"),{promises:v}=e;v.push(new e.Promise((function(e){h=e}))),e.Promise.allSettled(v.slice(0,-1)).then((function(){g.then((function(r){!async function({launcher:r,coreConfig:o,emit:a,API:l,CONST:d,storage:m,B:p,siteData:f},h){let g=c.get("sncampid"),v=1==c.get("snrules");function w(e){e=e.map((e=>{if(e.NS=u,!g||e.CampaignId==g)return v&&(e.rules&&e.rules.groups.forEach((function(e){e.conditions=[]})),delete e.targeting),e})).filter((e=>e)),o.SleekNotes.splice(0,0,...e)}o.namespaces.add(u),o.needBadge=!1;let S=Array.isArray(t[u])?t[u].pop():t[u];if(S){if("SleekNote"!=u)try{let e=S.DripAccountId,r=t._dcfg.account_uid;if(e&&r!=e)return console.error(`Drip Account ID's mismatch - _dcfg:${r}, init:${e}. Campaigns in ${n} ignored.`),void h()}catch(e){}for(let[e,t]of Object.entries(S))if("SleekNotes"==e)c.has("snpreview")||w(t);else if("HideSleeknoteBadge"==e){if("SleekNote"==u&&!c.has("snpreview")){let e=t;void 0===t&&(e=!0),!e&&S.CustomerId>=790&&(o.needBadge=!0)}}else"object"==typeof t&&t?(o[e]||(o[e]={}),Object.assign(o[e],t)):void 0!==t&&(o[e]=t)}await m.postCreate(),(o.local||o.reset)&&"n"!=o.reset&&await m.forceResetSession(o.reset);o.preview&&await e.Promise.all([import(i+s+"preview-utils.js"),import(i+s+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,n=await t.fetchHTMLConfig(o.preview);w(n),p.is.desktop&&r(n[0],o)}));t[u]&&!t[u].API&&(t[u].API=Promise.resolve(l),t[u].triggerOnClick=t[u].triggerOnclick=(...e)=>t[u].API.then((t=>t.call(t,"launch",...e))));f.initialize(),await r.add(o.SleekNotes);let b=await t.arequire("package-tracker");e.trackPageView||b.trackPageView(u)&&(e.trackPageView=!0);await a(d.CORE.EVENTS.LOAD,{NS:u,command:function(){try{return l.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}}),h()}(r,h)}))})),function(){try{return t.location!==t.parent.location}catch(e){}}()&&t.parent.postMessage(t.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}).call(this);